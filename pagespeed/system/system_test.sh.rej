--- pagespeed/system/system_test.sh
+++ pagespeed/system/system_test.sh
@@ -1344,10 +1344,11 @@
 
   # Send a beacon response using POST indicating that OptPuzzle.jpg is
   # critical and has rendered dimensions.
-  BEACON_URL="$HOST_NAME/$BEACON_HANDLER"
+  BEACON_URL="$HOST_NAME/$CRITICAL_IMAGES_BEACON_HANDLER"
   BEACON_URL+="?url=http%3A%2F%2Frenderedimagebeacon.example.com%2Fmod_pagespeed_test%2F"
   BEACON_URL+="image_rewriting%2Fimage_resize_using_rendered_dimensions.html"
   BEACON_DATA="oh=$OPTIONS_HASH&n=$NONCE&ci=1344500982&rd=%7B%221344500982%22%3A%7B%22rw%22%3A150%2C%22rh%22%3A100%2C%22ow%22%3A256%2C%22oh%22%3A192%7D%7D"
+  echo "$BEACON_URL"
   OUT=$(env http_proxy=$SECONDARY_HOSTNAME \
     $CURL -sSi -d "$BEACON_DATA" "$BEACON_URL")
   check_from "$OUT" egrep -q "HTTP/1[.]. 204"
@@ -1428,7 +1429,7 @@
     awk -F\' '/^pagespeed\.CriticalImages\.Run/ {print $(NF-1)}' $FETCH_FILE)
   # Send a beacon response using POST indicating that Puzzle.jpg is a critical
   # image.
-  BEACON_URL="$HOST_NAME/$BEACON_HANDLER"
+  BEACON_URL="$HOST_NAME/$CRITICAL_IMAGES_BEACON_HANDLER"
   BEACON_URL+="?url=http%3A%2F%2Fimagebeacon.example.com%2Fmod_pagespeed_test%2F"
   BEACON_URL+="image_rewriting%2Frewrite_images.html"
   BEACON_DATA="oh=$OPTIONS_HASH&n=$NONCE&ci=2932493096"
@@ -1454,7 +1455,7 @@
     awk -F\' '/^pagespeed\.CriticalImages\.Run/ {print $(NF-3)}' $FETCH_FILE)
   NONCE=$(
     awk -F\' '/^pagespeed\.CriticalImages\.Run/ {print $(NF-1)}' $FETCH_FILE)
-  BEACON_URL="$HOST_NAME/$BEACON_HANDLER"
+  BEACON_URL="$HOST_NAME/$CRITICAL_IMAGES_BEACON_HANDLER"
   BEACON_URL+="?url=http%3A%2F%2Fimagebeacon.example.com%2Fmod_pagespeed_test%2F"
   BEACON_URL+="image_rewriting%2Frewrite_images.html%3Fid%3D4"
   BEACON_DATA="oh=$OPTIONS_HASH&n=$NONCE&ci=2932493096"
